var ge=Object.defineProperty,pe=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var ie=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var ae=(i,t,a)=>t in i?ge(i,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[t]=a,N=(i,t)=>{for(var a in t||(t={}))fe.call(t,a)&&ae(i,a,t[a]);if(ie)for(var a of ie(t))xe.call(t,a)&&ae(i,a,t[a]);return i},Z=(i,t)=>pe(i,me(t));import{c as w,u as be,a as se,d as Ee,t as K,s as W,b as M,e as ve,p as ke}from"./vendor.1b2647b1.js";const we=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function a(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerpolicy&&(l.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?l.credentials="include":e.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(e){if(e.ep)return;e.ep=!0;const l=a(e);fetch(e.href,l)}};we();const Fe=[{id:"1",start:"1897",end:"1933",title:"AEG an der Oberspree",text:"F\xFCr lange Zeit ist die 1598 urkundlich erstmals erw\xE4hnte \xBBSch\xF6ne Weyde\xAB eine l\xE4ndlich gepr\xE4gte Gegend am n\xF6rdlichen Ufer der Spree. Das \xE4lteste nachweisbare Geh\xF6ft, der 1682 gegr\xFCndete \u201EQuappenkrug\u201C, wird als Bauernhof mit Gastwirtschaft gef\xFChrt. Im Jahr 1814 erwirbt Oberfinanzrat Reinbeck das Anwesen und l\xE4sst das Lokal schlossartig ausbauen. Er benennt es nach seiner Frau Wilhelmine \u201EWilhelminenhof\u201C. Diesen Namen f\xFChrt ab 1830 auch der erweiterte Gutsbezirk, in dem Mitte des 19. Jahrhunderts insgesamt 116 Menschen leben. Im Jahr der Reichsgr\xFCndung 1871 geht aus dem Wilhelminenhof der Ort Obersch\xF6neweide hervor. 1889 werden die L\xE4ndereien des alten Guts verkauft und parzelliert.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705326/01-04b_kwo-kohlenplatz-1904_uuqwzm.jpg"},{id:"2",start:"1933",end:"1945",title:"Kriegsproduktion und Zwangsarbeit",text:"Auch im KWO gibt es w\xE4hrend der NS-Zeit Anh\xE4nger_innen und Gegner_innen des Nationalsozialismus. Es sind vor allem KPD-Mitglieder, die sich auf dem Werksgel\xE4nde organisieren und zum Widerstand gegen das Regime aufrufen.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638710659/19331945-menschen-produktionshalle-01-1920x_jk1lze.jpg"},{id:"3",start:"1945",end:"1990",title:"Kabel f\xFCr den Sozialismus",text:"Nach dem Ende des Zweiten Weltkriegs liegt die Konzernzentrale der AEG, zu der auch das KWO geh\xF6rt, im sowjetisch besetzten Teil von Berlin.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705333/03-03b_neubau-spreehalle-1961-02_pre5sw.jpg"},{id:"4",start:"1990",end:void 0,title:"Vom Kabelwerk zur Denkfabrik",text:"Der Wandel des Quartiers zwischen Wilhelminenhofstra\xDFe und Spreelauf l\xE4sst sich auch an diesem Dreisatz ablesen. Ein bedeutendes Gr\xFCnderzentrum der Industriemoderne hat sich in einen modernen, lebendigen Hochschulstandort verwandelt: 2009 wird der Campus Wilhelminenhof der Hochschule f\xFCr Technik und Wirtschaft Berlin er\xF6ffnet.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638710851/seit-1990-produktion-hallenblock-ii-01-1920x_zcwj8k.jpg"},{id:"10",date:"1897",topic:"Produktion",title:"Entstehung des Kabelwerk Oberspree (KWO)",text:"Im Kabelwerk Oberspree entstehen vor allem Kabel, Dr\xE4hte und Gummifabrikate f\xFCr die heimische Elektroindustrie. Angesichts steigender Kupferpreise wird die Produktion auf Blei- und Aluminiumkabel ausgedehnt. Eine wichtige Rolle spielt das Exportgesch\xE4ft. So liefert die AEG ihre Erzeugnisse nach England oder S\xFCdafrika. Doch auch die Forschung kommt nicht zu kurz. Ingenieure des KWO sind ma\xDFgeblich an der Entwicklung moderner Funk- und Fernmeldetechnik beteiligt und forschen nach M\xF6glichkeiten zur Herstellung von synthetischem Kautschuk. In den 1920er Jahren startet im NAG-Geb\xE4ude die Bildr\xF6hrenproduktion f\xFCr Telefunken, einer gemeinsamen Unternehmenstochter von AEG und Siemens. Das Fernsehzeitalter beginnt in Obersch\xF6neweide.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705327/01-04c_kwo-trommellager-vor-halle-1-1912_bdfljk.jpg"},{id:"11",date:"1905",topic:"Ort",title:"Geb\xE4ude der Nationalen Automobil-Gesellschaft",text:"1905 entsteht das Geb\xE4ude der Nationalen Automobil-Gesellschaft* (NAG). Die Fabriken, ausgestattet mit elektrischer Antriebs- und Beleuchtungstechnik, geh\xF6ren zu den modernsten Industrieanlagen jener Zeit. Ihre Fassaden aus gelbem Ziegelstein, dem sogenannten \u201ESch\xF6neweider Klinker\u201C, pr\xE4gen das Erscheinungsbild des gesamten Quartiers.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705326/01-04b_kwo-kohlenplatz-1904_uuqwzm.jpg"},{id:"12",date:"1919",topic:"Ort",title:"Kleinstadt Obersch\xF6neweide",text:"Mit der Produktivit\xE4t w\xE4chst auch die Bev\xF6lkerungszahl: Dank des Zuzugs von Arbeitskr\xE4ften und deren Familien entwickelt sich Obersch\xF6neweide rasch zu einer Kleinstadt, die im Jahr 1919 rund 25.000 Einwohnerinnen und Einwohner z\xE4hlt.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705327/01-04c_kwo-trommellager-vor-halle-1-1912_bdfljk.jpg"},{id:"13",date:"1920",topic:"Ort",title:"Anschluss an Berlin",text:"Obersch\xF6neweide wird zu einem Ortsteil von Gro\xDF-Berlin.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705327/01-04c_kwo-trommellager-vor-halle-1-1912_bdfljk.jpg"},{id:"14",date:"1923",topic:"Menschen",title:"Ein Unternehmen mit Verantwortung",text:"F\xFCr die Werkspeisung der Arbeiter hatte die AEG schon im Ersten Weltkrieg eigene landwirtschaftliche Betriebe gegr\xFCndet. Auch in den Anfangsjahren der Weimarer Republik sorgt die Firma f\xFCr ihre Belegschaft. Denn die Not ist gro\xDF. Viele M\xE4nner sind im Krieg gefallen oder als Invaliden zur\xFCckgekehrt. Nicht selten nehmen nun Frauen, die ihre Familien schon w\xE4hrend der Kriegsjahre ern\xE4hren mussten, deren Arbeitsplatz im KWO ein. Doch der internationale Boykott deutscher Erzeugnisse nach dem Krieg bringt auch die AEG in wirtschaftliche Bedr\xE4ngnis. W\xE4hrend der Inflation 1923 wird der Lohn teilweise in Naturalien ausgezahlt.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705327/01-08_sortieren-von-pressteilen-1913_zeszux.jpg"},{id:"15",date:"1892",topic:"Menschen",title:"Emil und Mathilde Rathenau",text:"Der Ingenieur erkennt als einer der ersten deutschen Unternehmer die wirtschaftlichen Chancen der Elektrizit\xE4t. 1892 gr\xFCndet das Ehepaar die wohlt\xE4tige \u201EMathilde-Rathenau-Stiftung\u201C zur Unterst\xFCtzung von AEG-Arbeiterinnen sowie der Angeh\xF6rigen von verstorbenen Angestellten der AEG und der Berliner Elektrizit\xE4ts-Werke. Die Stiftung unterh\xE4lt einen Pensions- und Unterst\xFCtzungsfonds, \xFCbernimmt die Kosten f\xFCr medizinische Behandlungen im Krankheitsfall und finanziert Ferienaufenthalte von Kindern. Bis heute erinnert die Mathildenstra\xDFe in Obersch\xF6neweide an Mathilde Rathenau.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705334/01-12_emil_mathilde-rathenau_iv07dr.jpg"},{id:"16",date:"1907",topic:"Menschen",title:"Peter Behrens",text:"Peter Behrens geh\xF6rt mit seiner Idee des einheitlichen Erscheinungsbildes eines Unternehmens zu den Pionieren der Moderne. Von 1907 bis 1914 ist er als gestalterischer Beirat der AEG t\xE4tig und entwickelt in dieser Position das weltweit erste Corporate Design f\xFCr eine Firma. Dazu z\xE4hlen neben dem Firmenlogo auch das Design der Produkte und die Architektur der Fabrikgeb\xE4ude.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705328/01-13-Peter_Behrens_um_1913_b48kgi.jpg"},{id:"17",date:"1916",topic:"Menschen",title:"Jan Czochralski",text:"1916 taucht der polnische Chemiker Jan Czochralski im Metall-Labor des KWO seine Schreibfeder aus Versehen in einen Tiegel mit fl\xFCssigem Zinn. Beim Herausziehen bildet sich ein Metallfaden, ein sogenannter Einkristall. Czochralskis zuf\xE4llige Entdeckung wird zur Basis eines modernen industriellen Tiegelziehverfahrens zur Herstellung von Einkristallen. Das sogenannte Czochralski-Verfahren dient bis heute zur Fertigung von sogenannten Silizium-Ingots (zylinderf\xF6rmige Barren), die f\xFCr Mikrochips, in der Mikrosystemtechnik oder f\xFCr Solarmodule ben\xF6tigt werden.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705332/01-14_Czochralski-portrait_lrrjpo.jpg"},{id:"18",date:"1939",topic:"Produktion",title:"AEG als R\xFCstungslieferant",text:"Mit Beginn des Zweiten Weltkriegs im September 1939 wird die Fertigung der AEG auf Kriegsproduktion umgestellt. Das Unternehmen geh\xF6rt zusammen mit Krupp zu den wichtigsten R\xFCstungslieferanten Deutschlands.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1639059856/19331945-produktion-pressenarbeiter-ca-1934-01-1920x_bp8gvr.jpg"},{id:"19",date:"1933",topic:"Produktion",title:"Die AEG als R\xFCstungsbetrieb",text:"Nach dem Machtantritt des NS-Regimes im Januar 1933 produziert das Kabelwerk Oberspree (KWO) zun\xE4chst Verkabelungen f\xFCr neue Autobahnstrecken, aber auch die Lautsprecheranlage f\xFCr die Olympischen Spiele 1936 in Berlin. Doch nach Kriegsbeginn wird das KWO zum R\xFCstungsbetrieb und fertigt nun vor allem Fernmelde- und Starkstromkabel f\xFCr die Wehrmacht und ihre Zulieferer. Das Chemieunternehmen IG Farben beauftragt das KWO mit Herstellung und Lieferung von Starkstromkabeln f\xFCr den Aufbau einer Fabrik in Auschwitz. Mit Kriegsverlauf nehmen die Luftangriffe auf den Standort in Obersch\xF6neweide zu. Trotzdem l\xE4uft die Produktion weiter. Unter der Maschinenhalle des benachbarten Kraftwerks Oberspree befindet sich ein Luftschutzbunker, in den die Belegschaft w\xE4hrend der Angriffe fl\xFCchtet, um anschlie\xDFend direkt wieder an ihre Arbeitspl\xE4tze in den Werkhallen zur\xFCckzukehren.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705330/02-04_volksempfaenger-falkensee_phrzsp.jpg"},{id:"20",date:"1933",topic:"Menschen",title:"Alles f\xFCr den \u201EEndsieg\u201C",text:"Direkt nach Kriegsbeginn werden 700 KWO-Mitarbeiter zur Wehrmacht eingezogen. Um die Produktion aufrechtzuerhalten, arbeiten in den Fabriken nun vor allem Frauen. Im weiteren Verlauf des Krieges werden zudem Kriegsgefangene sowie Deportierte aus den besetzten Gebieten in ganz Europa zur Zwangsarbeit verpflichtet. Ihrem Schicksal widmet sich eine Ausstellung im nahegelegenen Dokumentationszentrum NS-Zwangsarbeit in Sch\xF6neweide. Es befindet sich auf dem Gel\xE4nde des einzigen noch weitgehend erhaltenen ehemaligen NS-Zwangsarbeiterlagers, das w\xE4hrend des Zweiten Weltkriegs zu den mehr als 3.000 \xFCber das Stadtgebiet verteilten Sammelunterk\xFCnften f\xFCr Zwangsarbeiter geh\xF6rte. Seit 2006 informiert dort die Stiftung Topographie des Terrors an historischem Ort \xFCber das System Zwangsarbeit.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705327/01-08_sortieren-von-pressteilen-1913_zeszux.jpg"},{id:"21",date:"1945",topic:"Ort",title:"Ein Land in Tr\xFCmmern",text:"Gegen Ende des Zweiten Weltkrieges wird auch Obersch\xF6neweide zum Ziel alliierter Bombenangriffe. W\xE4hrend die Sch\xE4den in den Wohnvierteln im Vergleich zur Berliner Innenstadt \xFCberschaubar bleiben, ger\xE4t das Gel\xE4nde der KWO unter starken Beschuss. Bombentreffer rei\xDFen gro\xDFe L\xF6cher in die Fassaden, und die nach Pl\xE4nen von Peter Behrens im Jahr 1916 errichtete Spreehalle am Ufer wird v\xF6llig zerst\xF6rt.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705330/02-02d_gebaeude-A4-nach-januar-1944-04_qcjwi3.jpg"},{id:"22",date:"1948",topic:"Produktion",title:"SAG",text:"Das KWO wird in eine Sowjetische Aktiengesellschaft (SAG) umgewandelt.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1638705333/02-02b_gebaeude-A4-nach-januar-1944-02_pbgpfp.jpg"},{id:"25",date:"1958",topic:"Produktion",title:"Starkstromkabel und W\xE4scheleine",text:"Die Nachkriegsproduktion im KWO konzentriert sich zun\xE4chst auf G\xFCter f\xFCr den t\xE4glichen Bedarf der notleidenden Bev\xF6lkerung: L\xF6ffel, T\xF6pfe, Bratpfannen, N\xE4gel und Feuerzeuge. Gleichzeitig gilt es, das stark zerst\xF6rte Kabelnetz Berlins wiederherzustellen. Schon 1958 kommen 85 Prozent aller in der DDR hergestellten Starkstromkabel aus dem KWO. Aber auch Gebrauchsg\xFCter f\xFCr den Massenbedarf, darunter Hula-Hoop-Reifen, W\xE4scheleinen und Gartenschl\xE4uche, werden in Obersch\xF6neweide produziert.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1639065195/19451990-produktion-arbeiterinnen-ringkerne-01-1920x_znt4cl.jpg"},{id:"26",date:"1967",topic:"Menschen",title:"Soziale Verantwortung",text:"1967 wird in der DDR die F\xFCnf-Tage-Woche eingef\xFChrt. Zum Ausgleich schafft die Regierung mehrere christliche Feiertage ab und lastet die Maschinen durch Schichtdienst st\xE4rker aus. Zur Steigerung der Produktivit\xE4t werden die Belegschaften der Betriebe mit zahlreichen Anreizen und Angeboten motiviert. So unterh\xE4lt das KWO betriebseigene Kinderg\xE4rten und Ferienlager, unterst\xFCtzt Sportvereine, darunter auch den 1. FC Union Berlin, und betreibt ein Klubhaus.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1639065195/19451990-produktion-arbeiterinnen-ringkerne-01-1920x_znt4cl.jpg"},{id:"27",date:"2009",topic:"Ort",title:"Er\xF6ffnung des Campus Wilhelminenhof der HTW",text:"Nach der Wiedervereinigung 1990 bricht die Produktion im KWO ein. 1992 \xFCbernimmt die britische Firma BICC Cables Ltd. das Werk. Doch 1997 wird der Betrieb endg\xFCltig eingestellt. Auf dem Areal er\xF6ffnet die HTW Berlin 2009 den Campus Wilhelminenhof. Mit den Disziplinen Maschinenbau, Elektrotechnik, Kommunikationstechnik und Design schreibt nun die Hochschule in Lehre und Forschung die gro\xDFe Geschichte des Ortes fort.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1639065564/seit-1990-produktion-hallenblock-ii-01-1280x_xjztsy.jpg"},{id:"28",date:"2005",topic:"Ort",title:"Beginn der Bauarbeiten am Campus Wilhelminenhof",text:"Nachdem alle Versuche fehlschlagen, auf dem KWO-Gel\xE4nde neues Gewerbe anzusiedeln, f\xE4llt 2004 die Entscheidung, das Areal in einen Hochschulcampus umzuwandeln. 2005 beginnen die Bauarbeiten. Aufgrund der starken Umweltbelastungen in Boden und Mauerwerk wird die 1928 nach dem Entwurf von Ernst Ziesel errichtete Fernmeldekabelfabrik, einer der bedeutendsten Industriebauten der Moderne, abgerissen - angesichts des anerkannten Denkmalwerts eine h\xF6chst umstrittene Entscheidung. An den \u201EZiesel-Bau\u201C erinnern heute zwei Neubauten. S\xE4mtliche Altbauten des Campus Wilhelminenhof stehen unter Denkmalschutz und tragen noch die Spuren ihrer einstigen Nutzung; die Stra\xDFen auf dem Gel\xE4nde sind nach den Architekten der AEG-Fabrikhallen benannt.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1639065491/seit-1990-ort-tor-4-01-1920x_l2apwg.jpg"},{id:"29",date:"1998",topic:"Menschen",title:"Wende und Wandel",text:"Es gibt nur wenige Orte, die den \xDCbergang vom Industriezeitalter zur Wissensgesellschaft besser verk\xF6rpern als Sch\xF6neweide. Doch dieser Wandel vollzog sich anfangs nicht ohne Verluste. Mit der Schlie\xDFung der Fabriken hatten viele Menschen ihre Arbeit verloren und den Stadtteil verlassen. Leerstand und Verfall pr\xE4gten das Viertel. Doch seit 1998 steigt die Einwohnerzahl wieder. In den renovierten Stra\xDFen mit ihren L\xE4den und Caf\xE9s herrscht neues Leben. Wo fr\xFCher die Maschinen und Flie\xDFb\xE4nder rotierten, wird heute gelernt und geforscht. Die HTW Berlin ist ein Teil dieser Erfolgsgeschichte.",image:"https://res.cloudinary.com/dvdtcs8mf/image/upload/v1639065491/seit-1990-ort-tor-4-01-1920x_l2apwg.jpg"}];function ze(i){if(!i.length)throw new Error("expected at least 1 date");const[t]=i;return i.reduce((a,s,e)=>e===0?a:[s<a[0]?s:a[0],s>a[1]?s:a[1]],[t,t])}function V(i,t,a){if(a<0)throw new Error("padding can't be negative");const s=+t-+i;if(s<0)throw new Error("start should be before end");return[new Date(+i-s*a),new Date(+t+s*a)]}function U(i,t){return i.split(" ").reduce((s,e)=>{const l=s[s.length-1];return l.length?l.length+e.length<=t?s[s.length-1]=`${s[s.length-1]} ${e}`:s.push(e):s[s.length-1]=e,s},[""])}function ye(i,t,a){let s=0;for(let e=0;e<i.length-1;e++){let l=0;for(let p=e+1;p<i.length;p++){const g=t(i[e].date),F=t(i[p].date);Math.abs(g-F)<a*2&&l++}l>s&&(s=l)}return s}const Ce="M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z";function de(){const i=w("svg").attr("viewBox","0 0 448 512").classed("compressIcon",!0);return i.append("rect").attr("width","100%").attr("height","100%").attr("fill","transparent"),i.append("svg:path").attr("d",Ce),i.node()}const J={Menschen:"#FF5F00",Ort:"#76B900",Produktion:"#0082D1"};function De({onImageClick:i,onCompressClick:t}){const a=400,s=650,e=300,l=30,p="#111",g=w("svg").classed("pointEventContent",!0).attr("y",50);g.append("defs").append("svg:filter").attr("id","point_event_blur").append("feGaussianBlur").attr("y",l-1).attr("in","SourceGraphic").attr("stdDeviation",4);const c=g.append("rect").attr("width",a).attr("height",l),D=g.append(de).attr("x",a-24).attr("y",6).attr("width",16).attr("height",16).on("click",function(){t()}).style("cursor","pointer").attr("fill","#FFF");g.append("rect").attr("y",l-1).attr("width",a).attr("height","100%").attr("fill",p);const m=g.append("text").attr("x",20).attr("y",20).attr("fill",p).attr("font-size",16),$=g.append("image").attr("y",l-1).attr("width",a).attr("height",e).attr("preserveAspectRatio","xMidYMid slice").style("cursor","pointer").style("opacity",.4).on("click",function(){D.transition().attr("opacity",1),i()}),j=g.append("image").attr("y",l-1).attr("width",a).attr("height",e).attr("preserveAspectRatio","xMidYMid meet").style("cursor","pointer").on("click",function(){D.transition().attr("opacity",1),i()});return Object.assign(g.node(),{setEvent:u=>{c.attr("fill",J[u.topic]),m.text(u.topic),$.attr("href",u.image).attr("filter","url(#point_event_blur)"),j.attr("href",u.image);const z=U(u.title,40),y=U(u.text,52),b=l+e+z.length*20+y.length*16+30;g.attr("height",Math.min(b,s)),g.selectAll(".titleLine, .textLine").remove(),g.selectAll(".titleLine").data(z).enter().append("text").classed("titleLine",!0).attr("x",10).attr("y",(E,C)=>e+50+C*20).text(E=>E).attr("fill","#ccc").style("font-size",16).style("font-weight","bold"),g.selectAll(".textLine").data(y).enter().append("text").classed("textLine",!0).attr("x",10).attr("y",(E,C)=>e+50+z.length*20+C*16).text(E=>E).attr("fill","#ccc").style("font-size",12)}})}function Se(i,{onCompress:t}){const a=w("svg");a.append("image").attr("width","100%").attr("height","80%").attr("preserveAspectRatio","xMinYMid slice").attr("href",i.image);const s=a.append("svg").classed("content",!0).attr("y","80%").attr("width","100%").attr("height","20%");return s.append("rect").attr("width","100%").attr("height","100%").attr("fill","#222"),s.append("text").text(i.title).attr("x",10).attr("y",20).attr("fill","#fff"),s.append(de).attr("x",475).attr("y",10).attr("width",16).attr("height",16).attr("fill","#FFF").style("cursor","pointer").on("click",function(e){e.stopPropagation(),t()}),s.selectAll(".spanEventText").data(U(i.text,65)).enter().append("text").text(e=>e).attr("x",10).attr("y",(e,l)=>40+l*16).style("font-size",12).attr("fill","#ccc"),s.append("rect").classed("contentGradient",!0).attr("width","100%").attr("height","100%").attr("fill","url(#grayTransparentGradient)").attr("pointer-events","none"),a.append("rect").attr("width","100%").attr("height","100%").attr("fill","transparent").attr("stroke","#000").attr("stroke-width",1).attr("pointer-events","none"),a.node()}function Ae({x:i,y:t,width:a,height:s,cornerRadius:e}){return w("svg:path").attr("d",`M${i},${t} h${a} a${e},${e} 0 0 1 ${e},${e} v${s} a${e},${e} 0 0 1 ${-e},${e} h${-a} a${e},${e} 0 0 1 ${-e},${-e} v${-s} a${e},${e} 0 0 1 ${e},${-e} z`).node()}function le(i){const t=w("svg").classed("tooltip",!0);return t.append(()=>Ae({x:20,y:0,width:i.length*10,height:2,cornerRadius:10})).attr("fill","#000000CC"),t.append("text").text(i).attr("x",21).attr("y",16.5).attr("fill","#FFF"),t.node()}function We(i){return i.map(t=>"date"in t?Z(N({},t),{date:new Date(t.date)}):Z(N({},t),{start:new Date(t.start),end:t.end?new Date(t.end):new Date}))}const R=50,oe=20,B=1e3,X=800,O=8;function Me(i){let t;const a=We(i),[s,e]=a.reduce((n,r)=>("date"in r?n[1].push(r):n[0].push(r),n),[[],[]]),l=a.reduce((n,r)=>("date"in r?n.push(r.date):(n.push(r.start),n.push(r.end)),n),[]),[p,g]=ze(l),F=V(p,g,.05),c=be().domain(F).range([0,B]),D=c.copy(),m=ye(e,c,O)*20+100,$=Math.min(X-m-R,500),j=se(c).tickSize(m-20),u=w("svg").attr("viewBox",`0 0 ${B} ${X}`),z=u.append("svg:defs").append("svg:linearGradient").attr("id","grayTransparentGradient").attr("gradientTransform","rotate(90)");z.append("svg:stop").attr("offset","5%").attr("stop-color","#00000022"),z.append("svg:stop").attr("offset","95%").attr("stop-color","#222");const y=(B-oe*2)/s.length,b=n=>n*y+oe,E=u.append("g").call(j).attr("transform",`translate(0, ${m})`).attr("fill","#fff").attr("stroke-width",2).style("font-size",18).style("font-family","FiraCode").style("cursor","grab"),C=Ee(),Y=V(F[0],F[1],.2);C.on("drag",n=>{const r=c.domain(),o=+r[1]-+r[0],d=n.dx*o/1e3;if(n.dx<0){const h=Math.min(+r[1]-d,+Y[1]),f=+r[0]+(h-+r[1]);L([new Date(f),new Date(h)],K("dragScale").duration(0))}else{const h=Math.max(+r[0]-d,+Y[0]),f=+r[1]+(h-+r[0]);L([new Date(h),new Date(f)],K("dragScale").duration(0))}}),C(E);const L=(n,r)=>{c.domain(n);const o=+n[0]+(+n[1]-+n[0])/2;E.transition(r).call(se(c).tickSize(m-20)),W(".pointEvent").transition(r).attr("x",d=>c(d.date)-O-(+d.date>o?400:0)).select("clipPath circle").attr("cx",d=>+d.date>o?400-O:O),W(".spanEvent").transition(r).attr("x",(d,h)=>t?c(d.start):b(h)).attr("width",d=>t?c(d.end)-c(d.start):y),W(".spanEventDateLine").each(function(d,h){M(this).property("updateScale")({startSpanX:t?c(d.start):b(h),startRealX:c(d.start),endSpanX:t?c(d.end):b(h+1),endRealX:c(d.end),transition:r})}),W(".pointEvent").transition(r).attr("cx",d=>c(d.date)),k&&(G.transition(r).attr("x",S(k)),I.transition(r).attr("x1",c(k.date)).attr("x2",S(k)+200))},q=n=>{const r=V(n?n.start:p,n?n.end:g,n?.5:.05),o=K("setSelectedSpanEvent").duration(1e3).ease(ke),d=t;t=n,L(r,o);const h=W(".spanEvent");h.style("cursor",x=>x===n?"default":"pointer");const f=h.filter(x=>x===n);if(f.select("image").transition(o).attr("height","50%"),f.select(".content").transition(o).attr("height","50%").attr("y","50%"),f.select(".contentGradient").attr("fill","transparent"),d&&d!==n){const x=h.filter(_=>_===d);x.select("image").transition(o).attr("height","80%"),x.select(".content").transition(o).attr("height","20%").attr("y","80%"),x.select(".contentGradient").attr("fill","url(#grayTransparentGradient)")}};u.selectAll(".spanEvent").data(s).enter().append(n=>Se(n,{onCompress:()=>{q(void 0)}})).classed("spanEvent",!0).attr("x",(n,r)=>b(r)).attr("y",m+R).attr("width",y).attr("height",$).style("cursor","pointer").on("click",function(n,r){r!==t&&q(r)}).on("mouseover",function(n,r){u.selectAll(".spanEventDateLine").filter(o=>o===r).each(function(){M(this).property("highlight")(!0)})}).on("mouseleave",function(n,r){u.selectAll(".spanEventDateLine").filter(o=>o===r).each(function(){M(this).property("highlight")(!1)})}),u.selectAll(".spanEventDateLine").data(s).enter().append(function(n,r){const o=c(n.start),d=c(n.end),h=w("svg:g"),f=m,x=m+R,_=h.append("svg:polygon").attr("points",`${b(r)},${x} ${o},${f} ${d},${f} ${b(r+1)}, ${x}`).attr("stroke","#000").attr("stroke-width",1).attr("fill","transparent").attr("stroke-linejoin","bevel"),ee=h.append("circle").attr("cx",o).attr("cy",m).attr("r",6).attr("fill","#414141"),te=h.append("circle").attr("cx",d).attr("cy",m).attr("r",6).attr("fill","#414141"),ne=h.append(()=>le(`${n.start.getFullYear()}`)).attr("x",o-40).attr("y",m-35).style("opacity",0).classed("tooltip",!0),re=h.append(()=>le(`${n.end.getFullYear()}`)).attr("x",d-40).attr("y",m-35).style("opacity",0).classed("tooltip",!0),he=h.node();return Object.assign(he,{updateScale:({startSpanX:v=b(r),startRealX:T,endSpanX:ue=b(r+1),endRealX:H,transition:A})=>{_.transition(A).attr("points",`${v},${x} ${T},${f} ${H},${f} ${ue}, ${x}`),ee.transition(A).attr("cx",T),te.transition(A).attr("cx",H),ne.transition(A).attr("x",T-40),re.transition(A).attr("x",H-40)},highlight:v=>{_.transition().attr("fill",v?"#6667ab":"transparent").attr("stroke-width",v?2:1),ee.transition().attr("r",v?8:6),te.transition().attr("r",v?8:6),ne.transition().style("opacity",v?1:0),re.transition().style("opacity",v?1:0)}})}).classed("spanEventDateLine",!0);const Q=n=>{const r=D(n.date);let o=0;for(let d of e){if(d===n)break;const h=D(d.date);Math.abs(r-h)<O*2&&o++}return o*20};let k,P=!1;const S=n=>Math.max(0,Math.min(c(n.date)-200,B-400)),I=u.append("line").attr("stroke-width",3).style("opacity",0);u.selectAll(".pointEvent").data(e).enter().append("circle").attr("cx",n=>c(n.date)).attr("cy",n=>50+Q(n)).attr("r",8).attr("fill",n=>J[n.topic]).style("cursor","pointer").classed("pointEvent",!0).on("mouseover",function(){M(this).transition().attr("r",12)}).on("mouseleave",function(){M(this).transition().attr("r",8)}).on("click",function(n,r){var d;const o=K().ease(ve).duration(k?500:0);k=r,(d=G.node())==null||d.setEvent(r),G.transition(o).attr("x",S(r)).attr("visibility","visible"),I.transition(o).style("opacity",1).attr("x1",c(r.date)).attr("y1",50+Q(r)).attr("x2",S(r)+200).attr("y2","110").attr("stroke",J[r.topic])});const G=u.append(()=>De({onImageClick:()=>{P=!0,u.transition().duration(1e3).attr("viewBox",`${S(k)-50} 80 500 400`)},onCompressClick:()=>{P?(u.transition().duration(1e3).attr("viewBox",`0 0 ${B} ${X}`),P=!1):(G.attr("visibility","hidden"),I.style("opacity",0))}})).attr("y",100).attr("visibility","hidden");return u.node()}var ce;(ce=document.getElementById("app"))==null||ce.appendChild(Me(Fe));
